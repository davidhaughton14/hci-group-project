<head>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">

    google.charts.load('current', {packages: ['corechart', 'bar', 'calendar']});
google.charts.setOnLoadCallback(drawAxisTickColors);

function drawAxisTickColors() {


  // general chart for all habits
  var data = new google.visualization.DataTable();
      data.addColumn('string', 'X');
      data.addColumn('number', 'Habit');
      data.addColumn('number', 'Mood');

      data.addRows([

        {{#each trackedAndMood}}
          ["{{this.date}}", {{this.value}},{{this.rating}}],
        {{/each}}        

      ]);

      var options = {
        hAxis: {
          title: 'Date'
        },
        vAxis: {
          title: 'Levels (unit)'
        },
        vAxes: {
          // Adds titles to each axis.
          0: {title: 'Habit Units'},
          1: {title: 'Mood'}
        },
        series: {
          0: {targetAxisIndex: 0},
          1: {targetAxisIndex: 1}
        },
        axes: {
          // Adds labels to each axis; they don't have to match the axis names.
          y: {
            Habit: {label: 'Habit Units'},
            Mood: {label: 'Mood'}
          }
        },
        chartArea: {
           top: 55,
           height: '40%' 
        },
        height: 600
      };

      var chart = new google.visualization.LineChart(document.getElementById('general_div'));

      chart.draw(data, options);

    // calendar for all habits



      var dataTable = new google.visualization.DataTable();
       dataTable.addColumn({ type: 'date', id: 'Date' });
       dataTable.addColumn({ type: 'number', id: 'Units drank' });

       var dates = [];

        {{#each trackedAndMood}}
              var arrSplit = "{{this.date}}".split('-');
              
              dates.push([ new Date(arrSplit[0], arrSplit[1], arrSplit[2]), {{this.value}}]);
          {{/each}} 

       dataTable.addRows(dates);

       var chart = new google.visualization.Calendar(document.getElementById('calendar_general_div'));

       var options = {
         title: "Habit Calendar View",
         height: 350,
         yearLabel: {
          fontName: 'Times-Roman',
          fontSize: 32,
          color: '#1A8763',
          bold: true,
          italic: true
        }
       };

       chart.draw(dataTable, options);

		// Sleep chart
       var data = google.visualization.arrayToDataTable([
        ['Sleep Type', 'REM', 'Light', 'Deep', 'mood' ],
        ['Monday', 2.1, 5, 0.5,8],
        ['Tuesday', 1.6, 6, 2,6],
        ['Wednesday', 2.2, 4, 3,7],
        ['Thursday', 1.4, 3, 3.7,8],
        ['Friday', 1.7, 2.6, 4,9],
        ['Saturday', 1.3, 1.8, 5,7],
        ['Sunday', 1.8, 3.1, 2.2,8]
      ]);

      var options = {
      	title: 'Hours of sleep based on sleep type',
        seriesType:'bars',
        
        series:{
           3: {type:'line'}
        },
        
       	hAxis: {
          title: 'Day of week',
         },

        vAxis: {
          title: 'Hours slept',
        },
        legend: { position: 'top', maxLines: 3 },
        bar: { groupWidth: '75%' },
        isStacked: true,

        colors: ['#4f9070','#2e8a6a', '#0d4950'],
        height: 600

       
      };

      var chart = new google.visualization.ComboChart(document.getElementById('sleep_div'));
      chart.draw(data, options);


      var data = new google.visualization.DataTable();

      var dates = [];

      for (i = 0; i < 31; i++) { 
        var monthago = new Date();
        monthago.setDate(monthago.getDate() - i);
        dates.push(monthago);
        
      }   


      data.addColumn({ type: 'date', id: 'Date' });
      data.addColumn({ type: 'number', id: 'Units drank' });
      data.addRows([
      [ dates[0], 66 ],
      [ dates[1], 70 ],
      [ dates[2], 68 ],
      [ dates[4], 65 ],
      [ dates[5], 59 ],
      [ dates[6], 63 ],
      [ dates[7], 67 ],
      [ dates[8], 66 ],
      [ dates[9], 58 ],
      [ dates[10], 62 ],
      [ dates[11], 63 ],
      [ dates[12], 61 ],
      [ dates[13], 57 ],
      [ dates[14], 64 ],
      [ dates[15], 68 ],
      [ dates[16], 66 ],
      [ dates[17], 63 ],
      [ dates[18], 66 ],
      [ dates[19], 64 ],
      [ dates[20], 68 ],
      [ dates[21], 70 ],
      [ dates[22], 71 ],
      [ dates[23], 71 ],
      [ dates[24], 66 ],
      [ dates[25], 68 ],
      [ dates[26], 64 ],
      [ dates[27], 66 ],
      [ dates[28], 62 ],
      [ dates[29], 61 ],
      [ dates[30], 60 ],
      ]);

        var options = {
          title: 'Your average heart rate',
          hAxis: {title: 'Date',  titleTextStyle: {color: '#333'}},
          vAxis: {title: 'Heart rate', minValue: 0},
          colors: ['red'],
          areaOpacity: 0.3,
          legend: {position: 'none'},
          height: 600
        };

        var chart = new google.visualization.AreaChart(document.getElementById('heartrate_div'));
      chart.draw(data, options);



       // alcohol consumption chart

      var dataTable = new google.visualization.DataTable();
       dataTable.addColumn({ type: 'date', id: 'Date' });
       dataTable.addColumn({ type: 'number', id: 'Units drank' });
       
       var dates = [];

       {{#each trackedAndMood}}
              var arrSplit = "{{this.date}}".split('-');
              
              dates.push([ new Date(arrSplit[0], arrSplit[1], arrSplit[2]), {{this.value}}]);
          {{/each}} 

       dataTable.addRows(dates);
       var chart = new google.visualization.Calendar(document.getElementById('alcohol_div'));

       var options = {
         title: "Alcohol consumption",
         height: 350,
         yearLabel: {
	        fontName: 'Times-Roman',
	        fontSize: 32,
	        color: '#1A8763',
	        bold: true,
	        italic: true
	      }
       };

       chart.draw(dataTable, options);

       var data = new google.visualization.DataTable();

      var dates = [];

      for (i = 0; i < 31; i++) { 
        var monthago = new Date();
        monthago.setDate(monthago.getDate() - i);
        dates.push(monthago);
        
      }   


      data.addColumn({ type: 'date', id: 'Date' });
      data.addColumn({ type: 'number', id: 'Systolic' });
      data.addColumn({ type: 'number', id: 'Systolic' });
      data.addColumn({ type: 'number', id: 'Diastolic' });
      data.addColumn({ type: 'number', id: 'Diastolic' });
      data.addColumn({ type: 'number', id: 'Heart rate' });
      data.addRows([
        [dates[0], 80, 80, 90, 90,55],
        [dates[1], 90, 90, 105, 105,58],
        [dates[2], 75, 75, 100, 100,60],
        [dates[3], 80, 80, 110, 110,55],
        [dates[4], 90, 90, 105, 105,70],
        [dates[5], 90, 90, 105, 105,65],
        [dates[6], 80, 80, 110, 110,74],
        [dates[7], 90, 90, 105, 105,67],
        [dates[8], 90, 90, 105, 105,64],
        [dates[9], 90, 90, 105, 105,68],
        [dates[10], 80, 80, 110, 110,61],
        [dates[11], 90, 90, 105, 105,61],
        [dates[12], 80, 80, 110, 110,70],
        [dates[13], 90, 90, 105, 105,65],
        [dates[14], 80, 80, 110, 110,68],
        [dates[15], 90, 90, 105, 105,65],
        [dates[16], 80, 80, 110, 110,72],
        [dates[17], 90, 90, 105, 105,66],
        [dates[18], 80, 80, 110, 110,74],
        [dates[19], 80, 80, 110, 110,61],
        [dates[20], 90, 90, 105, 105,61],
        [dates[21], 80, 80, 110, 110,70],
        [dates[22], 90, 90, 105, 105,65],
        [dates[23], 80, 80, 110, 110,68],
        [dates[24], 90, 90, 105, 105,65],
        [dates[25], 80, 80, 110, 110,72],
        [dates[26], 90, 90, 105, 105,66],
        [dates[27], 80, 80, 110, 110,74],
        [dates[28], 80, 80, 110, 110,61],
        [dates[29], 90, 90, 105, 105,61],
        [dates[30], 80, 80, 110, 110,70]
      ]);

   

        var options = {
          title: 'Blood pressure and heart rate chart',
          legend: 'none',
          seriesType: "candlesticks",
           series: {
                1: {type: "line"}
            },
          bar: { groupWidth: '3px' }, // Remove space between bars.
          candlestick: {
            fallingColor: { strokeWidth: 0, fill: '#a52714' }, // red
            risingColor: { strokeWidth: 0, fill: '#a52714' }   // red
          },
          height: 600
        };

        var chart = new google.visualization.ComboChart(document.getElementById('blood_div'));
        chart.draw(data, options);
    

    // Number of steps chart

    var dates = [];

      for (i = 0; i < 7; i++) { 
        var monthago = new Date();
        monthago.setDate(monthago.getDate() - i);
        dates.push(monthago);
        
      } 


    var data = new google.visualization.DataTable();
    
    data.addColumn('date', 'Date');
    data.addColumn('number', 'Steps');
    data.addRows([
        [dates[0], 5000],
        [dates[1], 4000],
        [dates[2], 6000],
        [dates[3], 4000],
        [dates[4], 1999],
        [dates[5], 1000],
        [dates[6], 900],
    ]);
    
    var view = new google.visualization.DataView(data);
    view.setColumns([0, {
        type: 'number',
        label: 'Value',
        calc: function (dt, row) {
            return (dt.getValue(row, 1) < 2000) ? dt.getValue(row, 1) : null;
        }
    }, {
        type: 'number',
        label: 'Value',
        calc: function (dt, row) {
            return (dt.getValue(row, 1) >= 3000 && dt.getValue(row, 1) < 5000) ? dt.getValue(row, 1) : null;
        }
    }, {
        type: 'number',
        label: 'Value',
        calc: function (dt, row) {
            return (dt.getValue(row, 1) >= 5000 && dt.getValue(row, 1) < 7000) ? dt.getValue(row, 1) : null;
        }
    }, {
        type: 'number',
        label: 'Value',
        calc: function (dt, row) {
            return (dt.getValue(row, 1) >= 7000 && dt.getValue(row, 1) < 9000) ? dt.getValue(row, 1) : null;
        }
    }, {
        type: 'number',
        label: 'Value',
        calc: function (dt, row) {
            return (dt.getValue(row, 1) >= 9000) ? dt.getValue(row, 1) : null;
        }
    }]);
    
    var chart = new google.visualization.ColumnChart(document.getElementById('steps_div'));


    var options = {
        legend: 'none',
        hAxis: {
          title: 'Day'
        },
        vAxis: {
          title: 'Number of steps'
        },
        isStacked: true,
        chartArea: {
           top: 55,
           height: '40%' 
        },
        height: 600
      };
    
    chart.draw(view, options);


  }
    </script>
  </head>